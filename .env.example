# CashFlow402 Backend Configuration
# Copy this file to .env and fill in your values

# ─── Server ────────────────────────────────────────────────────────────────────
PORT=3000
NODE_ENV=development

# ─── JWT ───────────────────────────────────────────────────────────────────────
# Secret used to sign short-lived JWT access tokens
JWT_SECRET=changeme_use_a_long_random_string_in_production
# JWT expiry in seconds (default: 60 seconds per-call, 3600 for subscriptions)
JWT_EXPIRY_PERCALL=60
JWT_EXPIRY_SUBSCRIPTION=3600

# ─── BCH Network ───────────────────────────────────────────────────────────────
# "mainnet" | "chipnet" (chipnet = BCH testnet)
BCH_NETWORK=chipnet

# ─── Electrum Connection ────────────────────────────────────────────────────────
# ChipNet Electrum servers (WSS)
ELECTRUM_HOST=chipnet.imaginary.cash
ELECTRUM_PORT=50004
ELECTRUM_PROTOCOL=wss

# ─── Merchant Wallet ───────────────────────────────────────────────────────────
# WIF-encoded private key for the merchant server wallet
# NEVER commit real keys. Generates via: cashscript keygen or openssl rand -hex 32
MERCHANT_WIF=your_merchant_wif_private_key_here
MERCHANT_ADDRESS=your_merchant_p2pkh_address_here

# ─── CashToken Categories ──────────────────────────────────────────────────────
# Category hex for the subscription NFT (set after first deployment)
SUBSCRIPTION_TOKEN_CATEGORY=

# ─── Per-Call Payment Settings ────────────────────────────────────────────────
# In satoshis (1 BCH = 100_000_000 sats)
DEFAULT_PERCALL_RATE_SATS=100

# ─── Subscription Settings ────────────────────────────────────────────────────
# Default interval in BCH blocks (144 ≈ 1 day, 1008 ≈ 1 week)
DEFAULT_INTERVAL_BLOCKS=144
# Default authorized amount per interval in satoshis
DEFAULT_AUTHORIZED_SATS=50000

# ─── Webhook ───────────────────────────────────────────────────────────────────
# Optional: external webhook URL to notify on subscription events
WEBHOOK_SECRET=changeme_webhook_secret

# ─── ChipNet E2E Test Script ─────────────────────────────────────────────────
# URL of the running CashFlow402 server (used by scripts/chipnet-e2e.ts)
API_URL=http://localhost:3000
# Optional: If set, chipnet-e2e reuses this subscriber key instead of generating a new one
# SUBSCRIBER_WIF=your_subscriber_wif_here
